<h2>任务一：<a class="link-info" href="https://leetcode.cn/problems/ransom-note/description/" rel="nofollow" title="Leetcode 383">Leetcode 383</a></h2> <br><h3>1、解题代码：</h3> <br><pre><code class="language-python">class Solution(object):<br>    def canConstruct(self, ransomNote, magazine):<br>        """<br>        :type ransomNote: str<br>        :type magazine: str<br>        :rtype: bool<br>        """<br>        # 统计 magazine 中每个字符的出现次数<br>        char_count = {}<br>        for char in magazine:<br>            if char in char_count:<br>                char_count[char] += 1<br>            else:<br>                char_count[char] = 1<br>        <br>        # 检查 ransomNote 中的每个字符是否在 magazine 中有足够的数量<br>        for char in ransomNote:<br>            if char in char_count and char_count[char] > 0:<br>                char_count[char] -= 1<br>            else:<br>                return False<br>        <br>        return True</code></pre> <br><h3>2、完成截图：</h3> <br><p style="text-align:center"><img alt="" src="https://i-blog.csdnimg.cn/direct/36a3547c256a4f9bbc5b94deb64bedc7.png" /></p> <br><h2>任务二：Vscode连接InternStudio与api调用、debug笔记</h2> <br><h3>1、Vscode连接InternStudio与api调用</h3> <br><p>        Vscode连接InternStudio在L0G1000已经完成并发布过，下面是一段测试代码：</p> <br><pre><code class="language-python">#./internlm_test.py<br>from openai import OpenAI<br>import os<br>def internlm_gen(prompt,client):<br>    '''<br>    LLM生成函数<br>    Param prompt: prompt string<br>    Param client: OpenAI client <br>    '''<br>    response = client.chat.completions.create(<br>        model="internlm2.5-latest",<br>        messages=[<br>            {"role": "user", "content": prompt},<br>      ],<br>        stream=False<br>    )<br>    return response.choices[0].message.content<br><br>api_key = os.getenv('api_key')<br>#api_key = "" #也可以明文写在代码内，不推荐<br>client = OpenAI(base_url="https://internlm-chat.intern-ai.org.cn/puyu/api/v1/",api_key=api_key)<br>prompt = '''你好！你是谁？'''<br>response = internlm_gen(prompt,client)<br>print(response)</code></pre> <br><p>        要先前往书生浦语<br /> ,登陆后点击API tokens创建一个新的api token。之后在终端中临时将token加入变量：</p> <br><pre><code class="language-python">export api_key="填入你的api token"<br>python internlm_test.py</code></pre> <br><p>        运行结果如下：</p> <br><p style="text-align:center"><img alt="" src="https://i-blog.csdnimg.cn/direct/af2404c5812d4ca6b439f128b8ecb80b.bmp" /></p> <br><h3>2、debug笔记</h3> <br><p>        测试代码如下：</p> <br><pre><code class="language-python">from openai import OpenAI<br>import json<br>def internlm_gen(prompt,client):<br>    '''<br>    LLM生成函数<br>    Param prompt: prompt string<br>    Param client: OpenAI client <br>    '''<br>    response = client.chat.completions.create(<br>        model="internlm2.5-latest",<br>        messages=[<br>            {"role": "user", "content": prompt},<br>      ],<br>        stream=False<br>    )<br>    return response.choices[0].message.content<br><br>api_key = ''<br>client = OpenAI(base_url="https://internlm-chat.intern-ai.org.cn/puyu/api/v1/",api_key=api_key)<br><br>content = """<br>书生浦语InternLM2.5是上海人工智能实验室于2024年7月推出的新一代大语言模型，提供1.8B、7B和20B三种参数版本，以适应不同需求。<br>该模型在复杂场景下的推理能力得到全面增强，支持1M超长上下文，能自主进行互联网搜索并整合信息。<br>"""<br>prompt = f"""<br>请帮我从以下``内的这段模型介绍文字中提取关于该模型的信息，要求包含模型名字、开发机构、提供参数版本、上下文长度四个内容，以json格式返回。<br>`{content}`<br>"""<br>res = internlm_gen(prompt,client)<br>res_json = json.loads(res)<br>print(res_json)</code></pre> <br><p>        使用VScode测试debug，在res = internlm_gen(prompt,client)处设置断点，查看<code>res</code>变量的值，如下图：</p> <br><p style="text-align:center"><img alt="" src="https://i-blog.csdnimg.cn/direct/67937d6fd5ac4e3fbbdf1ecd613d6bf4.png" /></p> <br><p>        我发现问题的核心是返回的文本包含了多余的描述性文字（例如 <code>根据提供的模型介绍文字，以下是提取的关于该模型的信息，以JSON格式返回：</code> 和 <code>这个JSON对象包含了模型的名称、开发机构、提供的参数版本以及支持的最大上下文长度。希望这些信息对您有所帮助！如果您需要进一步的详细信息或有其他问题，请随时告诉我。</code>），这些文字并不是有效的JSON格式。需要从返回的文本中提取出有效的JSON部分，然后进行解析。</p> <br><p>        解决代码如下：</p> <br><pre><code class="language-python">res = internlm_gen(prompt, client)<br><br># 使用正则表达式提取有效的 JSON 部分<br>json_pattern = r'```json\n(.*?)\n```'<br>match = re.search(json_pattern, res, re.DOTALL)<br><br>if match:<br>    json_str = match.group(1)  # 提取JSON字符串部分<br>    try:<br>        res_json = json.loads(json_str)  # 解析JSON<br>        print(res_json)  # 打印解析后的JSON对象<br>    except json.JSONDecodeError as e:<br>        print(f"JSON解析错误：{e}")<br>        print(f"返回的内容是：{res}")<br>else:<br>    print("未找到有效的JSON数据")</code></pre> <br><p>        截图如下：</p> <br><p style="text-align:center"><img alt="" src="https://i-blog.csdnimg.cn/direct/d7a5db1f3e1a4a0abc01ded0987d220b.bmp" /></p> <br><p style="text-align:center"><img alt="" src="https://i-blog.csdnimg.cn/direct/a006dd3d9096455f92952b326412aad7.bmp" /></p>